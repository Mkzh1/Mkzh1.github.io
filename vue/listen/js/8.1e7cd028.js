"use strict";(self["webpackChunklisten"]=self["webpackChunklisten"]||[]).push([[8],{8008:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});a(7658);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ting"},[e("div",{staticClass:"headerBox"},[e("div",{staticClass:"header"},[e("div",{staticClass:"mark"}),e("div",{staticClass:"logo",on:{click:function(e){"/tuijian"!=t.$router.path&&t.$router.push({path:"/"})}}}),e("div",{staticClass:"search"},[e("svg",{staticClass:"icon",attrs:{t:"1664715880181",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5518",width:"48",height:"48"}},[e("path",{attrs:{d:"M851.710029 803.043632c67.147306-78.301344 107.720374-180.059935 107.720373-291.298435 0-247.27171-200.453405-447.724091-447.724091-447.724091S63.981197 264.473487 63.981197 511.745197s200.453405 447.724091 447.724091 447.724091c111.2385 0 212.997092-40.573067 291.298435-107.720374l97.632622 97.632621c13.449313 13.449313 35.255968 13.449313 48.706305 0 13.449313-13.449313 13.449313-35.255968 0-48.706305l-97.632621-97.631598z m-67.805292-19.10001l-22.499434 19.294439c-34.062793 29.209252-72.504314 52.006468-114.25623 67.759243-43.206034 16.301268-88.775906 24.566512-135.441739 24.566512-102.521978 0-198.907189-39.924291-271.40127-112.417349s-112.417349-168.879292-112.417349-271.40127 39.924291-198.907189 112.417349-271.40127S409.184333 127.926578 511.706311 127.926578c102.521978 0 198.907189 39.924291 271.40127 112.417349s112.417349 168.879292 112.417349 271.40127c0 46.666856-8.265244 92.236727-24.566512 135.441738-15.752776 41.75294-38.549991 80.193437-67.759243 114.256231l-19.294438 22.500456z",fill:"#bfbfbf","p-id":"5519"}})]),e("input",{attrs:{type:"text",placeholder:"搜索"},on:{focus:function(e){return t.showSearch()}}})]),e("div",{staticClass:"openBtn"},[t._v("打开app")])])]),e("div",{staticClass:"warp",class:{downOpen:t.DownHeight}},[e("div",{ref:"tabs",staticClass:"tabs"},[e("ul",{ref:"tabsUl"},t._l(t.tabs,(function(a){return e("li",{key:a?.cid,class:{active:t.$route.params.id==a?.name},on:{click:function(e){t.toSub(a?.name),t.$route.params.id!==a?.name&&t.$router.replace({path:`/ting/${a.name}`})}}},[t._v(" "+t._s(a?.title)+" ")])})),0)]),e("div",{staticClass:"warpIcon"},[e("svg",{staticClass:"icon",attrs:{t:"1666084994794",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4102",width:"48",height:"48"},on:{click:function(e){return t.toggleStatus(!0)}}},[e("path",{attrs:{d:"M904.533333 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0L512 644.266667 179.2 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733333l362.666666 362.666667c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866667-12.8l362.666666-362.666667c17.066667-17.066667 17.066667-42.666667 0-59.733333z","p-id":"4103",fill:"#f66847"}})])]),e("div",{staticClass:"open-up",class:{open:t.showOpen}},[e("div",{staticClass:"open-title"},[e("div",{staticClass:"title"},[t._v("请选择分类")]),e("div",{staticClass:"openIcon"},[e("svg",{staticClass:"icon",attrs:{t:"1666084528705",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3139",width:"48",height:"48"},on:{click:function(e){return t.toggleStatus(!1)}}},[e("path",{attrs:{d:"M793.024 710.272a32 32 0 1 0 45.952-44.544l-310.304-320a32 32 0 0 0-46.4 0.48l-297.696 320a32 32 0 0 0 46.848 43.584l274.752-295.328 286.848 295.808z","p-id":"3140",fill:"#f66847"}})])])]),e("ul",{staticClass:"open-container"},t._l(t.tabs,(function(a){return e("li",{key:a?.cid},[t._v(" "+t._s(a?.title)+" ")])})),0)])]),e("keep-alive",[e("NewTingPage")],1),e("transition",{attrs:{name:"showPage"}},[e("searchPage",{directives:[{name:"show",rawName:"v-show",value:t.showSearchPage,expression:"showSearchPage"}],staticClass:"searchPotion",attrs:{showSearchPage:t.showSearchPage},on:{"Close-Page":function(e){return t.closeSearch()}}})],1)],1)},i=[],n=a(5983),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"newTingpage"},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.newtinglist,(function(a,s){return e("van-cell",{key:s,on:{click:function(e){return t.clickhandle(a.id)}}},[e("van-image",{attrs:{width:"70rem",height:"70rem","lazy-load":"",src:t.chuli(a?.coverPathSmall)}}),e("div",{staticClass:"hotbox"},[e("p",{staticClass:"tingtitle"},[t._v(t._s(a.title))]),e("p",{staticClass:"tingtime"},[e("svg",{directives:[{name:"show",rawName:"v-show",value:1==a.contentType,expression:"item.contentType == 1"}],staticClass:"icon",attrs:{t:"1665577203435",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"23495",width:"48",height:"48"}},[e("path",{attrs:{d:"M374.6 636.5c4.4 0 8.5-1.2 12.1-3.3l171.7-100c8-3.6 13.6-11.9 13.6-21.5 0-8.8-4.8-16.6-11.9-20.7l-167.8-97.8c-4.3-5-10.7-8.1-17.7-8.1-13.1 0-23.6 10.7-23.6 23.8v1.3l-0.3 0.2 0.4 199.8c-0.1 0.8-0.1 1.6-0.1 2.5 0 13.2 10.6 23.8 23.6 23.8z",fill:"#a3a3ac","p-id":"23496"}}),e("path",{attrs:{d:"M64.7 586.3a32.2 32.1 0 1 0 64.4 0 32.2 32.1 0 1 0-64.4 0Z",fill:"#a3a3ac","p-id":"23497"}}),e("path",{attrs:{d:"M960 398.3c0.1-1.6 0.2-3.2 0.2-4.8 0-35-28.5-63.3-63.6-63.3-11.7 0-22.7 3.2-32.2 8.7l-0.5-0.3-31.5 18.2v-64.7c-0.1-73.1-59.9-133-133.1-133H197.4c-73.1 0-133 59.8-133 133v165.8h0.2c0 17.7 14.4 32.1 32.2 32.1s32.2-14.4 32.2-32.1h0.2V287c0-35.2 28.8-64 64-64h510.2c35.2 0 64 28.8 64 64v448.9c0 35.2-28.8 64-64 64H193.3c-35.2 0-64-28.8-64-64v-21.4c0-17.7-14.4-32.1-32.2-32.1-17.8 0-32.2 14.4-32.2 32.1h-0.4v15.3c0 73.2 59.9 133 133 133h501.9c73.2 0 133-59.8 133-133v-64.1l33.1 19.1 0.1-0.1c9.2 5.1 19.8 8 31 8 35.1 0 63.6-28.4 63.6-63.3 0-1.6-0.1-3.2-0.2-4.8V398.3z m-63.6 205.1c-0.3 7.8-6.9 14.1-15 14.1-2.7 0-5.3-0.7-7.5-2l-41.5-23.7V430.1l40.9-23.2c2.3-1.5 5.1-2.3 8.1-2.3 8.3 0 15 6.6 15 14.6v184.2z",fill:"#a3a3ac","p-id":"23498"}})]),e("svg",{directives:[{name:"show",rawName:"v-show",value:2==a.contentType,expression:"item.contentType == 2"}],staticClass:"icon",attrs:{t:"1666023621682",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2569",width:"200",height:"200"}},[e("path",{attrs:{d:"M0 0h1024v1024H0z",fill:"#fff","p-id":"2570"}}),e("path",{attrs:{d:"M480 914.112a32 32 0 1 0 64 0h-64zM544 128a32 32 0 0 0-64 0h64zM288 754.112a32 32 0 0 0 64 0H288zM352 288a32 32 0 1 0-64 0h64zM96 626.112a32 32 0 1 0 64 0H96zM160 416a32 32 0 0 0-64 0h64z m512 338.112a32 32 0 1 0 64 0h-64zM736 288a32 32 0 0 0-64 0h64z m128 338.112a32 32 0 0 0 64 0h-64zM928 416a32 32 0 1 0-64 0h64zM544 914.112V128h-64v786.112h64z m-192-160V288H288v466.112h64z m-192-128V416H96v210.112h64z m576 128V288h-64v466.112h64z m192-128V416h-64v210.112h64z",fill:"#a3a3ac","p-id":"2571"}})]),e("span",{staticClass:"count"},[t._v(t._s(a.dataCount))]),e("span",{staticClass:"date"},[t._v(t._s(t.formatMsToDate(a.releaseAt))+"更新")])])])],1)})),1)],1)},o=[],r=0,c={data(){return{loading:!1,finished:!1,tingnav:null,tinglist:null,show:!0,newtinglist:[],active:2,fenlei:null,newfenlei:null,arr:null}},methods:{clickhandle(t){this.$router.push({path:"/ting",query:{id:t}})},formatMsToDate(t){let e=new Date(t),a=t=>(t=Number(t),t=t<10?`${t}`.padStart(2,"0"):t,t);return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())} ${a(e.getHours())}:${a(e.getMinutes())}`},onLoad(){r++,this.axios.get(`https://apis.netstart.cn/ximalaya/ting/categorySubjectList/${this.$route.params.id}`,{params:{pageNum:r,pageSize:10}}).then((t=>{this.loading=!1,this.arr=t.data.data?.subjects,this.newtinglist=new Set([...this.newtinglist,...this.arr]),this.arr.length<20&&r>3&&(this.finished=!0)})).catch((()=>{this.loading=!1,this.error=!0}))},onClick(t,e){let a=this.tingnav;this.fenlei=a.filter((t=>t.title==e)),[this.newfenlei]=this.fenlei,this.$route.params.id!==t&&this.$router.push({path:`/ting/${t}`})},chuli:function(t){return t.startsWith("http")?t:t.startsWith("http")?"1.png":`${t}`}},beforeDestroy(){console.log("内容销毁"),r=0}},h=c,d=a(1001),u=(0,d.Z)(h,l,o,!1,null,"d2a0ba60",null),p=u.exports,g={components:{NewTingPage:p,SearchPage:n.Z},beforeRouteUpdate(t,e,a){setTimeout((()=>{this.$router.go(0)})),this.axios.get(`https://apis.netstart.cn/ximalaya/ting/categorySubjectList/${t.params.id}`,{params:{pageNum:1,pageSize:10}}).then((t=>this.list=t.data.data.subjects)),a()},data(){return{tabs:[],currentClassify:"remen",showOpen:!1,list:[],showSearchPage:!1,oldScrollTop:0,DownHeight:!0}},filters:{formatMsToDate(t){let e=new Date(t),a=t=>(t=Number(t),t=t<10?`${t}`.padStart(2,"0"):t,t);return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())}`}},created(){this.axios.get("https://apis.netstart.cn/ximalaya/ting/categories").then((t=>{this.tabs=t.data.data.categories})),this.axios.get(`https://apis.netstart.cn/ximalaya/ting/categorySubjectList/${this.$route.params.id}`,{params:{pageNum:1,pageSize:20}}).then((t=>{this.list=t.data.data.subjects}))},beforeDestroy(){console.log("路由销毁前"),document.querySelector("body").style.overflow="initial"},methods:{scrolling(){try{let t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=t-this.oldScrollTop;this.oldScrollTop=t,this.DownHeight=e<0,0==t&&(this.DownHeight=!0)}catch(t){}},toggleStatus:function(t){t?(this.showOpen=t,document.querySelector("body").style.overflow="hidden"):(this.showOpen=t,document.querySelector("body").style.overflow="initial")},showSearch(){this.showSearchPage=!0,document.querySelector("body").style.overflow="hidden"},closeSearch(){this.showSearchPage=!1,document.querySelector("body").style.overflow="initial"},toSub(t){this.showOpen=!1,this.currentClassify=t}},mounted(){window.addEventListener("scroll",this.scrolling)}},w=g,v=(0,d.Z)(w,s,i,!1,null,"39619430",null),m=v.exports}}]);
//# sourceMappingURL=8.1e7cd028.js.map